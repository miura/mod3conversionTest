\begin{itemize}
        \item\textbf{distance} and \textbf{known distance} to "0" and  
        \item\textbf{Pixel aspect ratio} to "1".  
        \item The \textbf{Unit length} should be "pixel". 
        \item  \textbf{Global} should be ticked so that the settings apply to all images (and subsequently opened images). 

    \end{itemize}

\begin{enumerate}
    \item Open the image file in Fiji by
    \ijmenu{[File > Open...]} or by drag and drop of the file on the Fiji bar.
    
    \item Examine the hyperstack using the stack browser (slider).
    
    \item Split Channels to get independent images for each fluorescence channel.
    \ijmenu{[Images > Color > Split Channels]}  
    
    \item Remove the scale of the opened images by 
    \ijmenu{[Analyze > Set Scale\ldots]}. 
    Use the same settings as in Fig.~\ref{fig:init}:
   

    Alternatively, press the "click to remove scale" button. 
    
    \item Set Binary Options 
    \ijmenu{[Process > Binary > Options...]}.
    Make sure "Iterations" and "Count" are both set to 1 and that "Black background" and "Pad edges when eroding" are NOT ticked. EDM output should be set to overwrite. These settings correspond to ImageJ default settings and it is a good habit to always set them to predictable values at the beginning of a macro since they control the behavior of many commands that are commonly used. 
    
    \item Set Measurements 
    \ijmenu{[Analyze > Set Measurements...]}.
    

\end{enumerate}

\begin{itemize}
        \item\textbf{Area,} 
        \item\textbf{Mean gray value,}
        \item and \textbf{Shape Descriptors} 
        
        \item\textbf{Redirect} should be set to "None" 
        \item\textbf{Decimal places} should be 2 or greater.  
    \end{itemize}

\subsection{Exercise \arabic{exerciseCounter}}
\stepcounter{exerciseCounter}
Create a macro (from the recorder) that performs the steps 3 to 6 of the previous workflow.\footnote{If you are using OSX, it sometimes happens that copying from the command recorder and pasting it to the script editor does not work. In that case, try using right mouse click (or control-click) to copy recorded commands. If this still does not work, then click the ``Create'' button at the top-right corner.}. You can find the solution to the exercises as a complete macro in \textbf{code/solutions/module3\_01.ijm}.

\underline{\textbf{Note}}: We assume that the original hyperstack is already open when the macro is run.


\begin{lstlisting}[linerange={1-4}]
// Input: 
// - Hyperstack holding the 4 channels of the FISH assay (DAPI channel first)
// Output: 
// - Split channels, no scale

// Split channels
run("Split Channels");

// Initialization
run("Set Scale...", "distance=0 known=0 pixel=1 unit=pixel global");
run("Options...", "iterations=1 count=1 edm=Overwrite");
run("Set Measurements...", "area mean centroid shape redirect=None decimal=2");
\end{lstlisting}
\textbf{sourcecode}: mod3conversionTest/module3_01.ijm

It is a good habit to add a preamble to a macro holding author, purpose, version, date and any helpful additional notes. Comments should also be added throughout the macro to summarize the aim of specific sub-sections (e.g. ``Initialization'', ``Erase the small particles''), especially if the sequence of commands is not straightforward to understand. These comments will often prove useful to people reading your code and to yourself when reading the code to modify it years after.

\subsection{Summary of tools used in Step 1}

Here is a summary of the main ImageJ tools used in this step:

\begin{itemize}
\item \textbf{Split Channels} \ijmenu{[Images > Color > Split Channels]}.\\
Split channels to get independent images for each fluorescence channel.

\item \textbf{Set Scale} \ijmenu{[Analyze > Set Scale...]}.\\
Allow to calibrate the pixel size

\item \textbf{Binary Options} \ijmenu{[Process>Binary> Options...]}.\\ 
Set the behavior of binary image related commands.

\item \textbf{Set Measurements} \ijmenu{[Analyze > Set Measurements...]}.\\ 
Set which features should be measured when calling \ijmenu{[Analyze > Measure]}.
\end{itemize}

\newpage
